version: 2

models:
  - name: fct_orders
    description: "注文に関するファクトテーブルです。各注文の合計金額、合計数量、顧客満足度、利用シーンなどの測定値を提供します。売上分析や顧客行動分析の基礎となります。"
    columns:
      - name: order_key
        description: "注文を一意に識別する代理キーです。dbt_utils.generate_surrogate_keyによって生成されます。"
        tests:
          - unique
          - not_null
      - name: customer_key
        description: "顧客ディメンションへの外部キーです。"
      - name: store_key
        description: "店舗ディメンションへの外部キーです。"
      - name: ordered_at
        description: "注文日時です。時間軸での分析に利用されます。"
      - name: total_price
        description: "注文の合計金額です。売上分析の主要な指標となります。"
        tests:
          - not_null
          - dbt_utils.at_least_one
      - name: total_quantity
        description: "注文に含まれる商品の合計数量です。"
      - name: satisfaction_level
        description: "顧客の満足度です。顧客体験の評価に利用できます。"
      - name: usage_scenario
        description: "顧客が注文を利用したシーンです（例: テイクアウト、イートインなど）。"
      - name: order_method
        description: "注文方法です（例: アプリ、店頭など）。"
